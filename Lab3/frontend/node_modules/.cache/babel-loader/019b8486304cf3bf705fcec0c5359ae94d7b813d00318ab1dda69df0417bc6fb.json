{"ast":null,"code":"import _objectWithoutProperties from\"D:/Documents/GitHub/2006-SCSD-16/Lab3/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"D:/Documents/GitHub/2006-SCSD-16/Lab3/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const _excluded=[\"password\"];export const mockApi=(()=>{// in-memory data (for demo/testing only)\nconst users={};const stalls=require('./stubStalls').default;// we'll provide a simple list\nconst reviews={};return{signUp:async _ref=>{let{username,email,password,phone,diet}=_ref;if(users[username])return{success:false,message:'User exists'};const user={username,email,role:'User',points:0,phone,diet,lastPointsUpdate:new Date().toISOString()};users[username]=_objectSpread(_objectSpread({},user),{},{password});return{success:true,user};},signIn:async(username,password)=>{const u=users[username];if(!u||u.password!==password)return{success:false};const{password:_p}=u,publicUser=_objectWithoutProperties(u,_excluded);return{success:true,user:publicUser};},getStalls:async function(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};// filters: q, tags, maxPrice, sortby, location\n// simple filter logic\nlet list=stalls.slice();if(filters.q){const q=filters.q.toLowerCase();list=list.filter(s=>s.name.toLowerCase().includes(q)||s.center.toLowerCase().includes(q));}if(filters.tags&&filters.tags.length){list=list.filter(s=>filters.tags.every(t=>s.tags.includes(t)));}if(filters.maxPrice!=null){list=list.filter(s=>s.price<=filters.maxPrice);}// sort\nif(filters.sortBy==='price')list.sort((a,b)=>a.price-b.price);if(filters.sortBy==='popularity')list.sort((a,b)=>b.popularity-a.popularity);// distance sorting requires location; skip complexity here\nreturn{success:true,stalls:list};},getStallDetails:async stallId=>{const s=stalls.find(x=>x.id===stallId);// mock crowd & queue with timestamp\nreturn _objectSpread(_objectSpread({},s),{},{queueEstimate:Math.floor(Math.random()*25),// minutes\nqueueTimestamp:new Date().toISOString(),crowdLevel:['Low','Medium','High'][Math.floor(Math.random()*3)]});},getUserPoints:async username=>{const u=users[username];return{points:(u===null||u===void 0?void 0:u.points)||0,lastUpdate:u===null||u===void 0?void 0:u.lastPointsUpdate};},awardPoints:async(username,reason,qty)=>{const u=users[username];if(!u)return{success:false};// prevent duplicate awarding for same reason within 24 hours using a simple in-memory lastActions map\nu.points=(u.points||0)+qty;u.lastPointsUpdate=new Date().toISOString();return{success:true,newBalance:u.points};},redeemReward:async(username,reward)=>{const u=users[username];if(!u||u.points<reward.cost)return{success:false,message:'Not enough points'};u.points-=reward.cost;return{success:true,newBalance:u.points};}// Reviews and admin moderation endpoints are omitted in this mock but should exist in backend\n};})();","map":{"version":3,"names":["mockApi","users","stalls","require","default","reviews","signUp","_ref","username","email","password","phone","diet","success","message","user","role","points","lastPointsUpdate","Date","toISOString","_objectSpread","signIn","u","_p","publicUser","_objectWithoutProperties","_excluded","getStalls","filters","arguments","length","undefined","list","slice","q","toLowerCase","filter","s","name","includes","center","tags","every","t","maxPrice","price","sortBy","sort","a","b","popularity","getStallDetails","stallId","find","x","id","queueEstimate","Math","floor","random","queueTimestamp","crowdLevel","getUserPoints","lastUpdate","awardPoints","reason","qty","newBalance","redeemReward","reward","cost"],"sources":["D:/Documents/GitHub/2006-SCSD-16/Lab3/frontend/src/services/mockApi.js"],"sourcesContent":["export const mockApi = (() => {\r\n  // in-memory data (for demo/testing only)\r\n  const users = {};\r\n  const stalls = require('./stubStalls').default; // we'll provide a simple list\r\n  const reviews = {};\r\n  return {\r\n    signUp: async ({ username, email, password, phone, diet }) => {\r\n      if (users[username]) return { success: false, message: 'User exists' };\r\n      const user = { username, email, role: 'User', points: 0, phone, diet, lastPointsUpdate: new Date().toISOString() };\r\n      users[username] = { ...user, password };\r\n      return { success: true, user };\r\n    },\r\n    signIn: async (username, password) => {\r\n      const u = users[username];\r\n      if (!u || u.password !== password) return { success: false };\r\n      const { password: _p, ...publicUser } = u;\r\n      return { success: true, user: publicUser };\r\n    },\r\n    getStalls: async (filters = {}) => {\r\n      // filters: q, tags, maxPrice, sortby, location\r\n      // simple filter logic\r\n      let list = stalls.slice();\r\n      if (filters.q) {\r\n        const q = filters.q.toLowerCase();\r\n        list = list.filter(s => s.name.toLowerCase().includes(q) || s.center.toLowerCase().includes(q));\r\n      }\r\n      if (filters.tags && filters.tags.length) {\r\n        list = list.filter(s => filters.tags.every(t => s.tags.includes(t)));\r\n      }\r\n      if (filters.maxPrice != null) {\r\n        list = list.filter(s => s.price <= filters.maxPrice);\r\n      }\r\n      // sort\r\n      if (filters.sortBy === 'price') list.sort((a,b)=>a.price-b.price);\r\n      if (filters.sortBy === 'popularity') list.sort((a,b)=>b.popularity-a.popularity);\r\n      // distance sorting requires location; skip complexity here\r\n      return { success: true, stalls: list };\r\n    },\r\n    getStallDetails: async (stallId) => {\r\n      const s = stalls.find(x=>x.id===stallId);\r\n      // mock crowd & queue with timestamp\r\n      return {\r\n        ...s,\r\n        queueEstimate: Math.floor(Math.random()*25), // minutes\r\n        queueTimestamp: new Date().toISOString(),\r\n        crowdLevel: ['Low','Medium','High'][Math.floor(Math.random()*3)]\r\n      };\r\n    },\r\n    getUserPoints: async (username) => {\r\n      const u = users[username];\r\n      return { points: u?.points || 0, lastUpdate: u?.lastPointsUpdate };\r\n    },\r\n    awardPoints: async (username, reason, qty) => {\r\n      const u = users[username];\r\n      if (!u) return { success: false };\r\n      // prevent duplicate awarding for same reason within 24 hours using a simple in-memory lastActions map\r\n      u.points = (u.points || 0) + qty;\r\n      u.lastPointsUpdate = new Date().toISOString();\r\n      return { success: true, newBalance: u.points };\r\n    },\r\n    redeemReward: async (username, reward) => {\r\n      const u = users[username];\r\n      if (!u || u.points < reward.cost) return { success: false, message: 'Not enough points' };\r\n      u.points -= reward.cost;\r\n      return { success: true, newBalance: u.points };\r\n    },\r\n    // Reviews and admin moderation endpoints are omitted in this mock but should exist in backend\r\n  };\r\n})();\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}